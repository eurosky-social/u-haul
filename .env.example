# Database Configuration
POSTGRES_PASSWORD=changeme_secure_password

# Redis Configuration
REDIS_PASSWORD=changeme_secure_redis_password

# Rails Configuration
SECRET_KEY_BASE=changeme_run_rails_secret_to_generate
RAILS_ENV=production
PORT=3000

# Caddy Configuration (for HTTPS/SSL)
DOMAIN=migration.example.com
EMAIL=admin@example.com

# Migration Configuration
MAX_CONCURRENT_MIGRATIONS=5

# Legacy Blob Format Conversion
# Set to true to convert pre-2023 legacy blob format to current format during migration
# Legacy format: {"cid": "...", "mimeType": "..."}
# Current format: {"$type": "blob", "ref": {"$link": "..."}, "mimeType": "...", "size": 123}
# Note: Conversion fetches actual blob sizes from source PDS, which may slow down migration
CONVERT_LEGACY_BLOBS=false

# SMTP Configuration (for email notifications)
SMTP_ADDRESS=smtp.example.com
SMTP_PORT=587
SMTP_DOMAIN=example.com
SMTP_USERNAME=noreply@example.com
SMTP_PASSWORD=changeme_smtp_password
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true
SMTP_FROM_EMAIL=noreply@example.com

# Optional: Sentry Error Tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Optional: Plausible Analytics
# PLAUSIBLE_DOMAIN=your-domain.com
# PLAUSIBLE_API_KEY=your-plausible-api-key

# Optional: Custom Redis Configuration (defaults to redis://redis:6379/0)
# REDIS_URL=redis://redis:6379/0

# Optional: Custom Database URL (overrides POSTGRES_PASSWORD)
# DATABASE_URL=postgresql://postgres:password@postgres:5432/eurosky_migration_production

# Encryption Keys (IMPORTANT: Generate unique keys for production)
# MIGRATION_MASTER_KEY: Used for Rails credentials and Lockbox encryption
# Generate with: openssl rand -hex 16
MIGRATION_MASTER_KEY=changeme_run_openssl_rand_hex_16
# Alternative: Copy from config/master.key if it exists

# Active Record Encryption (required by Rails 7.1)
# Generate with: openssl rand -hex 32 (run 3 times for each key)
ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEY=changeme_run_openssl_rand_hex_32
ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY=changeme_run_openssl_rand_hex_32
ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT=changeme_run_openssl_rand_hex_32

#
# Eurosky Migration Configuration
#

# Deployment Mode
# - standalone: Users can enter any target PDS URL (default)
# - bound: Target PDS is pre-configured, users cannot change it
DEPLOYMENT_MODE=standalone

# Target PDS Host (required if DEPLOYMENT_MODE=bound)
# TARGET_PDS_HOST=https://eurosky.social

# Invite Code Configuration
# - required: Users must provide an invite code
# - optional: Invite code field is shown but not required (default)
# - hidden: Invite code field is not shown
INVITE_CODE_MODE=optional

# UI Customization
SITE_NAME=Eurosky Migration
SITE_SUBTITLE=Migrate your AT Protocol account to a new PDS

# Brand Colors (CSS hex codes, rgb(), or named colors)
PRIMARY_COLOR=#667eea
SECONDARY_COLOR=#764ba2

# Logo and Favicon URLs (optional)
# LOGO_URL=https://example.com/logo.png
# FAVICON_URL=https://example.com/favicon.ico

# Background Image URL (optional)
# If not set, uses gradient background from PRIMARY_COLOR and SECONDARY_COLOR
# Example: BACKGROUND_IMAGE_URL=/GMC_U-Haul_truck_front_1.JPG
# BACKGROUND_IMAGE_URL=https://example.com/background.jpg

# Default Target PDS (optional)
# Pre-selects this PDS in the wizard and automatically checks invite code requirements
# Example: DEFAULT_TARGET_PDS=https://eurosky.social
# DEFAULT_TARGET_PDS=https://eurosky.social

# Support Email Configuration
# SUPPORT_EMAIL: General support contact for migration issues
# TARGET_PDS_SUPPORT_EMAIL: Contact email for destination PDS provider (for orphaned account errors)
SUPPORT_EMAIL=support@example.com
TARGET_PDS_SUPPORT_EMAIL=support@example.com
